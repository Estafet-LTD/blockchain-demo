---
# Environments definition
environments:

  maven_mirror_url: http://nexus.nexus.svc:8081/nexus/content/groups/public
  smoke_test_repo: https://github.com/Estafet-LTD/blockchain-demo-qa-smoke-test.git

  setup:
    - name: nexus-setup     
    - name: github-webhook-setup

  teardown:
    - name: github-webhook-teardown

  monitoring:
    - name: jaeger-setup

  stages:
    - name: build
      display: Build
      description: Build Environment   
      next: test
      setup:
        - name: wiremock-setup  
          tag: 2.25.1
        - name: blockchain-setup
        - name: couchbase-setup

    - name: test
      display: Test
      description: Test Environment
      test_repo: https://github.com/Estafet-LTD/blockchain-demo-qa.git
      next: perf   
      setup:
        - name: amq-setup      
        - name: blockchain-setup      
        - name: couchbase-setup
  
    - name: perf
      display: Performance
      description: Performance Test Environment
      test_repo: https://github.com/Estafet-LTD/blockchain-demo-qa-perf.git
      next: security 
      setup:
        - name: amq-setup      
        - name: blockchain-setup     
        - name: couchbase-setup        
    
    - name: security
      display: Security
      description: Security Test Environment
      test_repo: https://github.com/Estafet-LTD/blockchain-demo-qa-security.git
      next: prod  
      setup:
        - name: amq-setup    
        - name: blockchain-setup   
        - name: couchbase-setup        
                    
    - name: prod
      display: Production
      description: Production Environment
      test_repo: https://github.com/Estafet-LTD/blockchain-demo-qa-prod.git
      next: end    
      setup:    
        - name: amq-setup
          application_name: blue  
        - name: amq-setup
          application_name: green
        - name: blockchain-setup   
        - name: couchbase-setup        
  
